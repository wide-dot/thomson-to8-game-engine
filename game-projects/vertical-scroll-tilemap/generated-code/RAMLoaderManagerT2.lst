                      (/home/sam/thomson):00001                 org   $0112
                      (/home/sam/thomson):00002         
                      (/home/sam/thomson):00003         ********************************************************************************
                      (/home/sam/thomson):00004         * Gestionnaire de chargement du RAM Loader (TO8 Thomson) - Benoit Rousseau 26/04/2021
                      (/home/sam/thomson):00005         * ------------------------------------------------------------------------------
                      (/home/sam/thomson):00006         * 
                      (/home/sam/thomson):00007         * Copie en page 0 le programme de chargement de RAM, ainsi que les index
                      (/home/sam/thomson):00008         * des donnees du niveau de jeu a charger
                      (/home/sam/thomson):00009         *
                      (/home/sam/thomson):00010         * input REG : [a] Game Mode to load
                      (/home/sam/thomson):00011         *             [b] Current Game Mode
                      (/home/sam/thomson):00012         *
                      (/home/sam/thomson):00013         ********************************************************************************
                      (/home/sam/thomson):00014                 
                      (/home/sam/thomson):00015                 INCLUDE "RAMLoaderT2.glb"
     0008             (  RAMLoaderT2.glb):00001         anim EQU $0008
     000E             (  RAMLoaderT2.glb):00002         anim_flags EQU $000E
     000C             (  RAMLoaderT2.glb):00003         anim_frame EQU $000C
     000D             (  RAMLoaderT2.glb):00004         anim_frame_duration EQU $000D
     0001             (  RAMLoaderT2.glb):00005         anim_link_mask EQU $0001
     000B             (  RAMLoaderT2.glb):00006         buf_bgdata EQU $000B
     0007             (  RAMLoaderT2.glb):00007         buf_erase_nb_cell EQU $0007
     0009             (  RAMLoaderT2.glb):00008         buf_erase_routine EQU $0009
     0008             (  RAMLoaderT2.glb):00009         buf_page_erase_routine EQU $0008
     0005             (  RAMLoaderT2.glb):00010         buf_prev_mapping_frame EQU $0005
     0013             (  RAMLoaderT2.glb):00011         buf_prev_render_flags EQU $0013
     000F             (  RAMLoaderT2.glb):00012         buf_prev_x1_pixel EQU $000F
     0011             (  RAMLoaderT2.glb):00013         buf_prev_x2_pixel EQU $0011
     000D             (  RAMLoaderT2.glb):00014         buf_prev_x_pixel EQU $000D
     000F             (  RAMLoaderT2.glb):00015         buf_prev_xy1_pixel EQU $000F
     0011             (  RAMLoaderT2.glb):00016         buf_prev_xy2_pixel EQU $0011
     000D             (  RAMLoaderT2.glb):00017         buf_prev_xy_pixel EQU $000D
     0010             (  RAMLoaderT2.glb):00018         buf_prev_y1_pixel EQU $0010
     0012             (  RAMLoaderT2.glb):00019         buf_prev_y2_pixel EQU $0012
     000E             (  RAMLoaderT2.glb):00020         buf_prev_y_pixel EQU $000E
     0000             (  RAMLoaderT2.glb):00021         buf_priority EQU $0000
     0003             (  RAMLoaderT2.glb):00022         buf_priority_next_obj EQU $0003
     0001             (  RAMLoaderT2.glb):00023         buf_priority_prev_obj EQU $0001
     0001             (  RAMLoaderT2.glb):00024         CONSTANTS_ASM EQU $0001
     6049             (  RAMLoaderT2.glb):00025         dk_drive EQU $6049
     604C             (  RAMLoaderT2.glb):00026         dk_sector EQU $604C
     604A             (  RAMLoaderT2.glb):00027         dk_track EQU $604A
     604B             (  RAMLoaderT2.glb):00028         dk_track_lsb EQU $604B
     604F             (  RAMLoaderT2.glb):00029         dk_write_location EQU $604F
     9F00             (  RAMLoaderT2.glb):00030         dp EQU $9F00
     9FB3             (  RAMLoaderT2.glb):00031         dp_engine EQU $9FB3
     9F97             (  RAMLoaderT2.glb):00032         dp_extreg EQU $9F97
     0001             (  RAMLoaderT2.glb):00033         draw_routine EQU $0001
     0006             (  RAMLoaderT2.glb):00034         erase_nb_cell EQU $0006
     0004             (  RAMLoaderT2.glb):00035         erase_routine EQU $0004
     0026             (  RAMLoaderT2.glb):00036         ext_variables EQU $0026
     40F2             (  RAMLoaderT2.glb):00037         fill EQU $40F2
     9FA9             (  RAMLoaderT2.glb):00038         glb_a0 EQU $9FA9
     9FAA             (  RAMLoaderT2.glb):00039         glb_a0_b EQU $9FAA
     9FAB             (  RAMLoaderT2.glb):00040         glb_a1 EQU $9FAB
     9FAC             (  RAMLoaderT2.glb):00041         glb_a1_b EQU $9FAC
     9FAD             (  RAMLoaderT2.glb):00042         glb_a2 EQU $9FAD
     9FAE             (  RAMLoaderT2.glb):00043         glb_a2_b EQU $9FAE
     9FAF             (  RAMLoaderT2.glb):00044         glb_a3 EQU $9FAF
     9FB0             (  RAMLoaderT2.glb):00045         glb_a3_b EQU $9FB0
     9FB1             (  RAMLoaderT2.glb):00046         glb_a4 EQU $9FB1
     9FB2             (  RAMLoaderT2.glb):00047         glb_a4_b EQU $9FB2
     9FD5             (  RAMLoaderT2.glb):00048         glb_alphaTiles EQU $9FD5
     9FEC             (  RAMLoaderT2.glb):00049         glb_camera_height EQU $9FEC
     9FD6             (  RAMLoaderT2.glb):00050         glb_camera_move EQU $9FD6
     9FEA             (  RAMLoaderT2.glb):00051         glb_camera_width EQU $9FEA
     9FDE             (  RAMLoaderT2.glb):00052         glb_camera_x_max_pos EQU $9FDE
     9FE2             (  RAMLoaderT2.glb):00053         glb_camera_x_min_pos EQU $9FE2
     9FDA             (  RAMLoaderT2.glb):00054         glb_camera_x_offset EQU $9FDA
     9FE6             (  RAMLoaderT2.glb):00055         glb_camera_x_pos EQU $9FE6
     9FE8             (  RAMLoaderT2.glb):00056         glb_camera_x_pos_coarse EQU $9FE8
     9FE5             (  RAMLoaderT2.glb):00057         glb_camera_x_sub EQU $9FE5
     9FDC             (  RAMLoaderT2.glb):00058         glb_camera_y_max_pos EQU $9FDC
     9FE0             (  RAMLoaderT2.glb):00059         glb_camera_y_min_pos EQU $9FE0
     9FD8             (  RAMLoaderT2.glb):00060         glb_camera_y_offset EQU $9FD8
     9FE4             (  RAMLoaderT2.glb):00061         glb_camera_y_pos EQU $9FE4
     9FE3             (  RAMLoaderT2.glb):00062         glb_camera_y_sub EQU $9FE3
     9F97             (  RAMLoaderT2.glb):00063         glb_d0 EQU $9F97
     9F98             (  RAMLoaderT2.glb):00064         glb_d0_b EQU $9F98
     9F9A             (  RAMLoaderT2.glb):00065         glb_d1 EQU $9F9A
     9F9B             (  RAMLoaderT2.glb):00066         glb_d1_b EQU $9F9B
     9F9D             (  RAMLoaderT2.glb):00067         glb_d2 EQU $9F9D
     9F9E             (  RAMLoaderT2.glb):00068         glb_d2_b EQU $9F9E
     9FA0             (  RAMLoaderT2.glb):00069         glb_d3 EQU $9FA0
     9FA1             (  RAMLoaderT2.glb):00070         glb_d3_b EQU $9FA1
     9FA3             (  RAMLoaderT2.glb):00071         glb_d4 EQU $9FA3
     9FA4             (  RAMLoaderT2.glb):00072         glb_d4_b EQU $9FA4
     9FA5             (  RAMLoaderT2.glb):00073         glb_d5 EQU $9FA5
     9FA6             (  RAMLoaderT2.glb):00074         glb_d5_b EQU $9FA6
     9FA7             (  RAMLoaderT2.glb):00075         glb_d6 EQU $9FA7
     9FA8             (  RAMLoaderT2.glb):00076         glb_d6_b EQU $9FA8
     9FD7             (  RAMLoaderT2.glb):00077         glb_force_sprite_refresh EQU $9FD7
     9FD1             (  RAMLoaderT2.glb):00078         glb_Page EQU $9FD1
     9FF4             (  RAMLoaderT2.glb):00079         glb_ram_end EQU $9FF4
     9FF2             (  RAMLoaderT2.glb):00080         glb_register_s EQU $9FF2
     9FF0             (  RAMLoaderT2.glb):00081         glb_screen_location_1 EQU $9FF0
     9FEE             (  RAMLoaderT2.glb):00082         glb_screen_location_2 EQU $9FEE
     9F00             (  RAMLoaderT2.glb):00083         glb_system_stack EQU $9F00
     9FD3             (  RAMLoaderT2.glb):00084         glb_timer EQU $9FD3
     9FD2             (  RAMLoaderT2.glb):00085         glb_timer_frame EQU $9FD2
     9FD3             (  RAMLoaderT2.glb):00086         glb_timer_minute EQU $9FD3
     9FD4             (  RAMLoaderT2.glb):00087         glb_timer_second EQU $9FD4
     0000             (  RAMLoaderT2.glb):00088         id EQU $0000
     0006             (  RAMLoaderT2.glb):00089         image_center_offset EQU $0006
     0010             (  RAMLoaderT2.glb):00090         image_set EQU $0010
     0004             (  RAMLoaderT2.glb):00091         image_subset_x1_offset EQU $0004
     0005             (  RAMLoaderT2.glb):00092         image_subset_y1_offset EQU $0005
     0004             (  RAMLoaderT2.glb):00093         image_x_size EQU $0004
     0005             (  RAMLoaderT2.glb):00094         image_y_size EQU $0005
     0008             (  RAMLoaderT2.glb):00095         nb_priority_levels EQU $0008
     0000             (  RAMLoaderT2.glb):00096         next_object EQU 0 ; <<incomplete>>
     0026             (  RAMLoaderT2.glb):00097         object_base_size EQU $0026
     0000             (  RAMLoaderT2.glb):00098         object_rsvd EQU 0 ; <<incomplete>>
     003B             (  RAMLoaderT2.glb):00099         object_rsvd_size EQU $003B
     0000             (  RAMLoaderT2.glb):00100         object_size EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00101         page_draw_routine EQU $0000
     0003             (  RAMLoaderT2.glb):00102         page_erase_routine EQU $0003
     000A             (  RAMLoaderT2.glb):00103         prev_anim EQU $000A
     0007             (  RAMLoaderT2.glb):00104         priority EQU $0007
     40C1             (  RAMLoaderT2.glb):00105         RAMLoader EQU $40C1
     0002             (  RAMLoaderT2.glb):00106         render_flags EQU $0002
     0080             (  RAMLoaderT2.glb):00107         render_hide_mask EQU $0080
     0004             (  RAMLoaderT2.glb):00108         render_overlay_mask EQU $0004
     0008             (  RAMLoaderT2.glb):00109         render_playfieldcoord_mask EQU $0008
     0040             (  RAMLoaderT2.glb):00110         render_subobjects_mask EQU $0040
     0020             (  RAMLoaderT2.glb):00111         render_todelete_mask EQU $0020
     0010             (  RAMLoaderT2.glb):00112         render_xloop_mask EQU $0010
     0001             (  RAMLoaderT2.glb):00113         render_xmirror_mask EQU $0001
     0002             (  RAMLoaderT2.glb):00114         render_ymirror_mask EQU $0002
     40D4             (  RAMLoaderT2.glb):00115         RL_LoadData EQU $40D4
     40F5             (  RAMLoaderT2.glb):00116         RL_RAM_index EQU $40F5
     40C5             (  RAMLoaderT2.glb):00117         RL_While EQU $40C5
     0022             (  RAMLoaderT2.glb):00118         routine EQU $0022
     0025             (  RAMLoaderT2.glb):00119         routine_quaternary EQU $0025
     0023             (  RAMLoaderT2.glb):00120         routine_secondary EQU $0023
     0024             (  RAMLoaderT2.glb):00121         routine_tertiary EQU $0024
     0000             (  RAMLoaderT2.glb):00122         rsv_bgdata_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00123         rsv_bgdata_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00124         rsv_buffer_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00125         rsv_buffer_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00126         rsv_draw_routine EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00127         rsv_erase_nb_cell EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00128         rsv_erase_routine EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00129         rsv_image_center_offset EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00130         rsv_image_subset EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00131         rsv_mapping_frame EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00132         rsv_page_draw_routine EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00133         rsv_page_erase_routine EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00134         rsv_prev_anim EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00135         rsv_prev_erase_nb_cell_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00136         rsv_prev_erase_nb_cell_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00137         rsv_prev_erase_routine_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00138         rsv_prev_erase_routine_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00139         rsv_prev_mapping_frame_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00140         rsv_prev_mapping_frame_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00141         rsv_prev_page_erase_routine_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00142         rsv_prev_page_erase_routine_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00143         rsv_prev_render_flags_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00144         rsv_prev_render_flags_1 EQU 0 ; <<incomplete>>
     0080             (  RAMLoaderT2.glb):00145         rsv_prev_render_onscreen_mask EQU $0080
     0001             (  RAMLoaderT2.glb):00146         rsv_prev_render_overlay_mask EQU $0001
     0000             (  RAMLoaderT2.glb):00147         rsv_prev_x1_pixel_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00148         rsv_prev_x1_pixel_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00149         rsv_prev_x2_pixel_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00150         rsv_prev_x2_pixel_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00151         rsv_prev_x_pixel_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00152         rsv_prev_x_pixel_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00153         rsv_prev_xy1_pixel_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00154         rsv_prev_xy1_pixel_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00155         rsv_prev_xy2_pixel_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00156         rsv_prev_xy2_pixel_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00157         rsv_prev_xy_pixel_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00158         rsv_prev_xy_pixel_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00159         rsv_prev_y1_pixel_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00160         rsv_prev_y1_pixel_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00161         rsv_prev_y2_pixel_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00162         rsv_prev_y2_pixel_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00163         rsv_prev_y_pixel_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00164         rsv_prev_y_pixel_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00165         rsv_priority_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00166         rsv_priority_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00167         rsv_priority_next_obj_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00168         rsv_priority_next_obj_1 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00169         rsv_priority_prev_obj_0 EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00170         rsv_priority_prev_obj_1 EQU 0 ; <<incomplete>>
     0001             (  RAMLoaderT2.glb):00171         rsv_render_checkrefresh_mask EQU $0001
     0004             (  RAMLoaderT2.glb):00172         rsv_render_displaysprite_mask EQU $0004
     0002             (  RAMLoaderT2.glb):00173         rsv_render_erasesprite_mask EQU $0002
     0000             (  RAMLoaderT2.glb):00174         rsv_render_flags EQU 0 ; <<incomplete>>
     0080             (  RAMLoaderT2.glb):00175         rsv_render_onscreen_mask EQU $0080
     0008             (  RAMLoaderT2.glb):00176         rsv_render_outofrange_mask EQU $0008
     0000             (  RAMLoaderT2.glb):00177         rsv_x1_pixel EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00178         rsv_x2_pixel EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00179         rsv_xy1_pixel EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00180         rsv_xy2_pixel EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00181         rsv_y1_pixel EQU 0 ; <<incomplete>>
     0000             (  RAMLoaderT2.glb):00182         rsv_y2_pixel EQU 0 ; <<incomplete>>
     0005             (  RAMLoaderT2.glb):00183         run_object_next EQU $0005
     0003             (  RAMLoaderT2.glb):00184         run_object_prev EQU $0003
     00E3             (  RAMLoaderT2.glb):00185         screen_bottom EQU $00E3
     00C8             (  RAMLoaderT2.glb):00186         screen_height EQU $00C8
     0030             (  RAMLoaderT2.glb):00187         screen_left EQU $0030
     00CF             (  RAMLoaderT2.glb):00188         screen_right EQU $00CF
     001C             (  RAMLoaderT2.glb):00189         screen_top EQU $001C
     00A0             (  RAMLoaderT2.glb):00190         screen_width EQU $00A0
     0003             (  RAMLoaderT2.glb):00191         sound_end_addr EQU $0003
     0005             (  RAMLoaderT2.glb):00192         sound_meta_size EQU $0005
     0000             (  RAMLoaderT2.glb):00193         sound_page EQU $0000
     0001             (  RAMLoaderT2.glb):00194         sound_start_addr EQU $0001
     4000             (  RAMLoaderT2.glb):00195         start EQU $4000
     000E             (  RAMLoaderT2.glb):00196         status_flags EQU $000E
     0001             (  RAMLoaderT2.glb):00197         status_xflip_mask EQU $0001
     0002             (  RAMLoaderT2.glb):00198         status_yflip_mask EQU $0002
     000A             (  RAMLoaderT2.glb):00199         sub_anim EQU $000A
     0001             (  RAMLoaderT2.glb):00200         subtype EQU $0001
     0001             (  RAMLoaderT2.glb):00201         subtype_w EQU $0001
     001E             (  RAMLoaderT2.glb):00202         x_acl EQU $001E
     0018             (  RAMLoaderT2.glb):00203         x_pixel EQU $0018
     0012             (  RAMLoaderT2.glb):00204         x_pos EQU $0012
     0014             (  RAMLoaderT2.glb):00205         x_sub EQU $0014
     001A             (  RAMLoaderT2.glb):00206         x_vel EQU $001A
     0018             (  RAMLoaderT2.glb):00207         xy_pixel EQU $0018
     0020             (  RAMLoaderT2.glb):00208         y_acl EQU $0020
     0019             (  RAMLoaderT2.glb):00209         y_pixel EQU $0019
     0015             (  RAMLoaderT2.glb):00210         y_pos EQU $0015
     0017             (  RAMLoaderT2.glb):00211         y_sub EQU $0017
     001C             (  RAMLoaderT2.glb):00212         y_vel EQU $001C
     404D             (  RAMLoaderT2.glb):00213         zx0_code EQU $404D
     404B             (  RAMLoaderT2.glb):00214         zx0_copy EQU $404B
     4000             (  RAMLoaderT2.glb):00215         zx0_decompress EQU $4000
     0001             (  RAMLoaderT2.glb):00216         ZX0_DISABLE_DISABLING_INTERRUPTS EQU $0001
     0040             (  RAMLoaderT2.glb):00217         zx0_dp EQU $0040
     0040             (  RAMLoaderT2.glb):00218         zx0_dp_end EQU $0040
     400F             (  RAMLoaderT2.glb):00219         zx0_eof EQU $400F
     4062             (  RAMLoaderT2.glb):00220         zx0_literals EQU $4062
     4011             (  RAMLoaderT2.glb):00221         zx0_new_offset EQU $4011
     4050             (  RAMLoaderT2.glb):00222         zx0_offset EQU $4050
     40A0             (  RAMLoaderT2.glb):00223         zx0_reload EQU $40A0
     40C0             (  RAMLoaderT2.glb):00224         zx0_rts EQU $40C0
                      (/home/sam/thomson):00016                 
0112                  (/home/sam/thomson):00017         RAMLoaderManager
                      (/home/sam/thomson):00018         
                      (/home/sam/thomson):00019         * Copie en page 0a des donnees du mode a charger
                      (/home/sam/thomson):00020         * les groupes de 6 octets sont recopiees a l'envers
                      (/home/sam/thomson):00021         * la fin des donnees est marquee par un octet negatif ($FF par exemple)
                      (/home/sam/thomson):00022         ************************************************************       
0112 CE027D           (/home/sam/thomson):00023                 ldu   #Gm_Index
0115 58               (/home/sam/thomson):00024                 aslb
0116 AEC5             (/home/sam/thomson):00025                 ldx   b,u                      ; load address of current game mode data        
0118 48               (/home/sam/thomson):00026                 asla
0119 EEC6             (/home/sam/thomson):00027                 ldu   a,u                      ; load address of new game mode data
                      (/home/sam/thomson):00028                 
011B 10EE5E           (/home/sam/thomson):00029                 lds   -2,u                     ; load destination address
011E 5D               (/home/sam/thomson):00030                 tstb
011F 2B1D             (/home/sam/thomson):00031                 bmi   RLM_SetPage              ; negative value means first load so nothing to compare
                      (/home/sam/thomson):00032                 
0121                  (/home/sam/thomson):00033         RLM_SkipCommon        
0121 ECC4             (/home/sam/thomson):00034                 ldd   ,u
0123 10A384           (/home/sam/thomson):00035                 cmpd  ,x   
0126 2616             (/home/sam/thomson):00036                 bne   RLM_SetPage
0128 EC42             (/home/sam/thomson):00037                 ldd   2,u
012A 10A302           (/home/sam/thomson):00038                 cmpd  2,x   
012D 260F             (/home/sam/thomson):00039                 bne   RLM_SetPage
012F EC44             (/home/sam/thomson):00040                 ldd   4,u
0131 10A304           (/home/sam/thomson):00041                 cmpd  4,x   
0134 2608             (/home/sam/thomson):00042                 bne   RLM_SetPage
0136 327A             (/home/sam/thomson):00043                 leas  -6,s                     ; adjust destination address
0138 3346             (/home/sam/thomson):00044                 leau  6,u                      ; adjust new Game Mode source address
013A 3006             (/home/sam/thomson):00045                 leax  6,x                      ; adjust current Game Mode source address
013C 20E3             (/home/sam/thomson):00046                 bra   RLM_SkipCommon
                      (/home/sam/thomson):00047                 
                      (/home/sam/thomson):00048         * Positionnement de la page 0a en zone 4000-5FFF
                      (/home/sam/thomson):00049         ***********************************************************
013E                  (/home/sam/thomson):00050         RLM_SetPage
013E F6E7C3           (/home/sam/thomson):00051                 ldb   $E7C3                    ; charge l'id de la demi-Page 0 en espace ecran
0141 C4FE             (/home/sam/thomson):00052                 andb  #$FE                     ; positionne bit0=0 pour page 0 RAMA
0143 F7E7C3           (/home/sam/thomson):00053                 stb   $E7C3                    ; dans l'espace ecran        
                      (/home/sam/thomson):00054                 
0146 86FF             (/home/sam/thomson):00055                 lda   #$FF                     ; ecriture balise de fin
0148 3402             (/home/sam/thomson):00056                 pshs  a                        ; pour GameModeEngine
014A                  (/home/sam/thomson):00057         RLM_CopyData
014A 3736             (/home/sam/thomson):00058                 pulu  d,x,y                    ; on lit 6 octets
014C 3436             (/home/sam/thomson):00059                 pshs  d,x,y                    ; on ecrit 6 octets
014E 4D               (/home/sam/thomson):00060                 tsta                           ; balise de fin dans REG A
014F 2AF9             (/home/sam/thomson):00061                 bpl   RLM_CopyData             ; non => boucle
0151 3266             (/home/sam/thomson):00062                 leas  6,s                      ; on remote de 6 car le dernier bloc est une balise de fin
                      (/home/sam/thomson):00063         
                      (/home/sam/thomson):00064         * Copie en page 0a du code Game Mode Engine
                      (/home/sam/thomson):00065         * les groupes de 7 octets sont recopiees a l'envers, le builder va inverser
                      (/home/sam/thomson):00066         * les donnees a l'avance on gagne un leas dans la boucle.
                      (/home/sam/thomson):00067         ************************************************************    
0153 CE0167           (/home/sam/thomson):00068                 ldu   #RAMLoaderBin            ; source
0156                  (/home/sam/thomson):00069         RLM_CopyCode
0156 373E             (/home/sam/thomson):00070                 pulu  d,x,y,dp                 ; on lit 7 octets
0158 343E             (/home/sam/thomson):00071                 pshs  d,x,y,dp                 ; on ecrit 7 octets
015A 118C4000         (/home/sam/thomson):00072                 cmps  #$4000                   ; fin ?
015E 26F6             (/home/sam/thomson):00073                 bne   RLM_CopyCode             ; non => boucle
0160                  (/home/sam/thomson):00074         RLM_CopyCode_restore_s
0160 10CE9F00         (/home/sam/thomson):00075                 lds   #glb_system_stack        ; positionnement pile systeme
                      (/home/sam/thomson):00076                 
                      (/home/sam/thomson):00077         * Execution du RAMLoader en page 0a
                      (/home/sam/thomson):00078         ************************************************************
0164 7E40C1           (/home/sam/thomson):00079                 jmp   RAMLoader     
                      (/home/sam/thomson):00080         
                      (/home/sam/thomson):00081         * ==============================================================================
                      (/home/sam/thomson):00082         * RAMLoader
                      (/home/sam/thomson):00083         * ==============================================================================
0167                  (/home/sam/thomson):00084         RAMLoaderBin
0167 400020D300000005 (/home/sam/thomson):00085                 INCLUDEBIN "RAMLoaderT2.bin"
     55AEA1EEA1BDAAC6
     C0F70555B7F70555
     C655F7026100F7E7
     E5C6AA9F00869F1F
     8B7EF5ECA12A0B10
     CE4925F439108E40
     094E482603A68248
     5948240C48592416
     4859482411824924
     1B48594825F7D74F
     20ABA64859482602
     8D062603A6824924
     09258AC6010F4E48
     E7C2313F26F848D7
     4F109E4EE6824826
     028D2B25F7A68249
     24094859C6010F4E
     482603F88EFFFF48
     25AFE6A2E7C2301F
     268EFFFF31C9FFFF
     4F26020C4E9F5D02
     8D5E25F75CD70124
     094859482626020C
     52D753C656D752E6
     82565CF70F4E5D27
     E65A594826028D7E
     2503A68249240948
     5335AFC601482652
     CC80401F9B20342F
     CC0001FD40
                      (/home/sam/thomson):00086                 INCLUDE "BuilderFileIndexT2.asm"
                      (BuilderFileIndexT):00001         * Generated Code
                      (BuilderFileIndexT):00002         
                      (BuilderFileIndexT):00003         * structure: rom src page, rom src end addr. hb, rom src end addr. lb, ram dest page, ram dest end addr. hb, ram dest end addr. lb
025C 4114             (BuilderFileIndexT):00004                 fdb   RL_RAM_index+31
025E                  (BuilderFileIndexT):00005         gm_scrollscreen
025E 00041747E000     (BuilderFileIndexT):00006                 fcb   $00,$04,$17,$47,$E0,$00
0264 00041378B9C2     (BuilderFileIndexT):00007                 fcb   $00,$04,$13,$78,$B9,$C2
026A 00050EDEE000     (BuilderFileIndexT):00008                 fcb   $00,$05,$0E,$DE,$E0,$00
0270 00050AFBB843     (BuilderFileIndexT):00009                 fcb   $00,$05,$0A,$FB,$B8,$43
0276 000106BBAC34     (BuilderFileIndexT):00010                 fcb   $00,$01,$06,$BB,$AC,$34
027C FF               (BuilderFileIndexT):00011                 fcb   $FF
027D                  (BuilderFileIndexT):00012         Gm_Index
027D 025E             (BuilderFileIndexT):00013                 fdb   gm_scrollscreen
